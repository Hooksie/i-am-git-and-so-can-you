<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/gitgraph.css">

		<link rel="stylesheet" href="css/theme/solarized.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<style>
			.git-color {
				color: #f05133;
			}
		</style>
		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

				<section>
					<img width="200" height="200" src='img/git-icon.png' style="background:none;border:none;box-shadow:none">
					<h1>Advanced <span class="git-color">Git</span></h1>
					<h3>Understanding the graph, commits and other mysteries you never knew you wanted to know - in a format for massive nerds.</h3>
					<h4><span class="git-color">Matt Hooks / Greg Bowser</span></h4>
				</section>

				<section>
					<section>
						<h3>Describe <span class="git-color">Git</span> using at least 3 buzzwords</h3>
						<p><span class="git-color">Git</span> is an open source, distributed source control management tool,
							designed to be fast, flexible, and secure.</p>
					</section>
					<section>
						<h3>What is "distributed" SCM?</h3>
						<p>Every checkout works independetly and contains the full history of the project.</p>
					</section>
					<section>
						<h3>How is it "fast and flexible"?</h3>
						<ul>
							<li>Committing, branching and history are all local operations</li>
							<li>Users and teams can independently define their own workflows</li>
						</ul>
					</section>
				</section>

				<section>
					<h3>97f341d10392085d981353457def1f4dc06b9d93</h3>
					<p>Every commit in <span class="git-color">Git</span> is identified by a sha1 hash.</p>
					<p>For our purposes, we're going to refer to commits by letter names (A, B, C, etc)</p>
				</section>

				<section>
					<section>
						<h3>2-minute <span class="git-color">Git</span> crash course
					</section>
					<section>
						<h3>Getting a repository</h3>
						<p style="text-align:center">
						<pre><code class="bash" style="text-align:center;font-size:200%;overflow:hidden">
$ git clone url
						</code></pre></p>
					</section>
					<section>
						<h3>Committing changes</h3>
						<p style="text-align:center">
						<pre><code class="bash" style="text-align:center;font-size:200%;overflow:hidden">
$ git add filename.txt; git commit
						</code></pre></p>
					</section>
					<section>
						<h3>Receiving changes</h3>
						<p style="text-align:center">
						<pre><code class="bash" style="text-align:center;font-size:200%;overflow:hidden">
$ git pull
						</code></pre></p>
						<br>
						<h3>Sharing changes</h3>
						<p style="text-align:center">
						<pre><code class="bash" style="text-align:center;font-size:200%;overflow:hidden">
$ git push
						</code></pre></p>
					</section>
					<section>
						<h3>Making a new branch</h3>
						<p style="text-align:center">
						<pre><code class="bash" style="text-align:center;font-size:200%;overflow:hidden">
$ git branch name-of-branch
						</code></pre></p>
						<br>
						<h3>Switching branches</h3>
						<p style="text-align:center">
						<pre><code class="bash" style="text-align:center;font-size:200%;overflow:hidden">
$ git checkout name-of-branch
						</code></pre></p>
					</section>
					<section>
						<h3>What happens if I _____?</h3>
						<p>Almost every operation in <span class="git-color">Git</span> is local.</p>
						<ul>
							<li><strong>committing</strong> is local</li>
							<li><strong>branching</strong> is local</li>
							<li><strong>checking history</strong> is local</li>
							<li><strong>reverting</strong> is local</li>
						</ul>
						<p>Your changes become public (and effectively permanent) when you <strong>push</strong>.</p>
					</section>
				</section>

				<section>
					<section>
						<h3><span class="git-color">Git</span> Graph Theory 101</h3>
						<img src="img/graph-theory.png" style="background:none;border:none;box-shadow:none">
					</section>
					<section>
						<h3><span class="git-color">Git</span> is a big graph</h3>
						<p>Every commit in a <span class="git-color">Git</span> repo can be thought of as a node in a graph (because they all are).</p>
						<p><canvas id="graph-example"></canvas></p>
					</section>
					<section>
						<h3>Specifically, a <em>Directed Acyclic Graph</em></h3>
						<p><canvas id="graph-example-parents"></canvas></p>
						<h4>Let's break that down...</h4>
						<div class="fragment">
							<dl>
								<dt>directed</dt>
								<dd>
									Parents commits are indicated by the direction of the edges.
								</dd>
							</dl>
						</div>
						<div class="fragment">
							<dl>
								<dt>acyclic</dt>
								<dd>
									Commits reference their ancestors, not their descendents.
								</dd>
							</dl>
						</div>
					</section>
					<section>
						<h3>Every time you commit, you add a new point to the graph, and that point references your last commit.</h3>
						<img src="img/basic-commiting.png" style="padding:1em">
					</section>
					<section>
						<h3>A branch is just a pointer to a commit</h3>
						<!-- <p><canvas id="graph-example-branch"></canvas></p> -->
						<img src="img/basic-branching-1.png" style="padding:1em">
						<p><code>master</code> and <code>C6</code> are the exact same thing.
					</section>
					<section>
						<h3>A merge is just a commit with multiple parents</h3>
						<!-- <p><canvas id="graph-example-merge"></canvas></p> -->
						<img src="img/basic-merging-2.png" style="padding:1em">
						<p><code>master</code> (<code>C6</code>) has two parents.</p>
					</section>
					<section>
						<h3>Why do I want abstract math in my version control?</h3>
						<ul>
							<li>Because commits are nodes on a graph, you can "move" those
								nodes when you want to reorganize your work, and better
								organize your patch before sharing it with the team.</li>
							<li>When branches are just pointers, they can be created intantly,
							which is great (assuming you like branches).</li>
						</ul>
						<p>Once you understand the <span class="git-color">Git</span> graph,
							 the tool becomes simple and intuitive.</p>
					</section>
				</section>

				<section>
					<section>
						<h3>The Art of <span style="text-decoration:line-through">War</span> Committing</h3>
						<p>In <span class="git-color">Git</span>, you stage files before committing them.</p>
					</section>
					<section>
						<h3>HEAD and INDEX</h3>
						<p>There are three “active” versions of every file in
							<span class="git-color">Git</span>:</p>
						<ul>
							<li>The file in the working directory (your unsaved changes)</li>
							<li>The file added to the INDEX (files you've marked for commit)</li>
							<li>The file committed to HEAD (the file as it was last comitted)</li>
					</section>
					<section>
						<h3>The <span class="git-color">Git</span> workflow</h3>
						<p>Files move from your <em>working directory</em>, to the <em>INDEX</em>,
							then become your new <em>HEAD</em>.
					</section>
					<section>
						<h3>You can inspect your INDEX any time with</h3>
						<p style="text-align:center">
						<pre><code class="bash" style="text-align:center;font-size:200%;overflow:hidden">
$ git status
						</code></pre></p>
					</section>
					<section>
						<pre style="padding:1em;font-size:90%">
$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

        new file:   file1.py

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   file1.py
						</pre>
					</section>
					<section>
						<h3>What <span class="git-color">Git</span> reset <em>resets</em></h3>
						<p>"<span class="git-color">Git</span> is flexible": You can move
							the HEAD and INDEX at will with</p>
						<p style="text-align:center">
						<pre><code class="bash" style="text-align:center;font-size:200%;overflow:hidden">
$ git status
						</code></pre></p>
					</section>
				</section>

				<section>
						<section>
							<h3>The <span class="git-color">Git</span> Database</h3>
							Commits, Trees and Blobs
						</section>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script src="js/gitgraph.js"></script>
		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				width: "100%",
				height: "100%",
				margin: 0.2,
				// minScale: 1,
				// maxScale: 1,
				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});

			var named_graph = new GitGraph.Template({
          branch: {
            color: "#000000",
            lineWidth: 4,
            spacingX: 80,
            mergeStyle: "straight",
            labelRotation: 0,
						showLabel: true,
						labelFont: "normal 16pt arial"
          },
					mode: 'compact',
          commit: {
            spacingY: -100,
            dot: {
              size: 20,
              strokeColor: "#000000",
              strokeWidth: 8
            },
            message: {
              color: "white",
							displayHash: true,
							displayMessage: true,
							font: "bold 14pt arial"
            },
          },
          arrow: {
            size: 14,
            offset: 3
          }
			});

			var named_graph_bezier = new GitGraph.Template({
          branch: {
            color: "#000000",
            lineWidth: 4,
            spacingX: 80,
            mergeStyle: "bezier",
            labelRotation: 0,
						showLabel: true,
						labelFont: "normal 16pt arial"
          },
          commit: {
            spacingY: -75,
            dot: {
              size: 20,
              strokeColor: "#000000",
              strokeWidth: 8
            },
            message: {
              color: "white",
							displayHash: true,
							displayMessage: true,
							font: "bold 14pt arial"
            },
          },
          arrow: {
						active: false
          }
			});

			var named_graph_big = new GitGraph.Template({
          branch: {
            color: "#000000",
            lineWidth: 6,
            spacingX: 200,
            mergeStyle: "straight",
            labelRotation: 0,
						showLabel: true,
						labelFont: "normal 20pt arial"
          },
          commit: {
            spacingY: -150,
						color: "#f05133",
            dot: {
              size: 60,
              strokeColor: "#000000",
              strokeWidth: 10
            },
            message: {
              color: "white",
							displayHash: true,
							displayMessage: true,
							font: "bold 40pt arial"
            },
						widthExtension: -200
          },
          arrow: {
            size: 30,
            offset: 3
          }
			});

			Reveal.addEventListener( 'ready', function( event ) {
				// Graph example
				(function() {
					var git_graph_example = new GitGraph({
						elementId: 'graph-example',
						reverseArrow: true,
						template: named_graph_bezier,
						orientation: 'horizontal'
						// mode: 'compact'
					});

					var master = git_graph_example.branch("master");
					master.commit("A");
					master.commit("B")
					var develop = master.branch("develop");
					develop.commit("C");
					master.commit("D").commit("E").commit("F");
					develop.commit("G");
					master.commit({message: "H", showLabel: true});
					var feature = develop.branch("feature1")
					feature.commit("I")
					feature.commit({message: "J", showLabel: true})
					feature.merge(develop, {message: "K", showLabel: true})
				}());
				// Parents example
				(function() {
					var git_graph_example = new GitGraph({
						elementId: 'graph-example-parents',
						reverseArrow: true,
						template: named_graph,
						orientation: 'horizontal'
						// mode: 'compact'
					});

					var master = git_graph_example.branch("master");
					master.commit({message: "A"}).commit("B");
					var develop = master.branch("develop");
					develop.commit("C");
					master.commit("D").commit("E").commit("F");
					develop.commit("G");
					master.commit("H");
					develop.merge(master, "I");
				}());
			});
			// Commits example
			(function() {
					var git_graph = new GitGraph({
						elementId: 'graph-example-commits',
						reverseArrow: true,
						template: named_graph_big,
						orientation: 'horizontal',
						mode: 'compact'
					});

					var master = git_graph.branch("master");
					master.commit("C0").commit("C1").commit("C2").commit("C3");
			}());
			(function() {
					var git_graph = new GitGraph({
						elementId: 'graph-example-branch',
						reverseArrow: true,
						template: named_graph_big,
						orientation: 'horizontal',
						mode: 'compact'
					});

					var master = git_graph.branch("master");
					master.commit("C0").commit("C1").commit({message: "C2", showLabel: true});
			}());
			(function() {
					var git_graph = new GitGraph({
						elementId: 'graph-example-merge',
						reverseArrow: true,
						template: named_graph_big,
						orientation: 'horizontal'
					});

					var master = git_graph.branch("master");
					master.commit("C0");
					var development = master.branch("development");
					development.commit("C1");
					development.merge(master, {message: "C3", showLabel: true});
			}());
		</script>
	</body>
</html>
